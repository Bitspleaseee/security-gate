{"version":3,"sources":["webpack:///route-thread.chunk.42134.js","webpack:///./routes/thread.js","webpack:///./actions/content.js"],"names":["webpackJsonp","45S/","module","__webpack_exports__","__webpack_require__","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_preact__","__WEBPACK_IMPORTED_MODULE_1_preact_redux__","n","__WEBPACK_IMPORTED_MODULE_2_preact_fluid__","__WEBPACK_IMPORTED_MODULE_3_preact_router__","__WEBPACK_IMPORTED_MODULE_4_linkstate__","__WEBPACK_IMPORTED_MODULE_5__components_WarningCard_js__","__WEBPACK_IMPORTED_MODULE_6__actions_content_js__","_extends","assign","target","i","arguments","length","source","key","hasOwnProperty","Thread","_Component","_temp","_this","_ret","_len","args","Array","_key","this","apply","concat","state","content","componentWillMount","props","fetchData","render","_ref","_ref2","isAuth","addComment","thread","comments","error","mobile","columns","style","max-width","margin","padding","left","width","message","label","onClick","route","middle","title","description","map","_ref3","user","username","rows","cols","onChange","linkState","thread_id","id","Component","mapStateToProps","_ref4","auth","media","propsId","parseInt","common","authUser","authenticated","isNaN","threads","find","_ref5","filter","_ref6","comment","getUser","user_id","mapDispatchToProps","dispatch","getThread","getCommentsInThread","data","connect","wtIQ","d","getAllCategories","getAllThreads","__WEBPACK_IMPORTED_MODULE_0____","getRequest","s","getJson","postRequest","postJson","requestError","payload","then","res","catch","e","threadId","userId","parentId"],"mappings":"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","file":"route-thread.chunk.42134.js","sourcesContent":["webpackJsonp([2],{\n\n/***/ \"45S/\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact__ = __webpack_require__(\"KM04\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_preact__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_preact_redux__ = __webpack_require__(\"E/bI\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_preact_fluid__ = __webpack_require__(\"PbA0\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_preact_fluid___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_preact_fluid__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_preact_router__ = __webpack_require__(\"/QC5\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_linkstate__ = __webpack_require__(\"CSCC\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__components_WarningCard_js__ = __webpack_require__(\"FEQE\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__actions_content_js__ = __webpack_require__(\"wtIQ\");\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n\n\n\nvar Thread = function (_Component) {\n  _inherits(Thread, _Component);\n\n  function Thread() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Thread);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = {\n      content: ''\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  Thread.prototype.componentWillMount = function componentWillMount() {\n    this.props.fetchData();\n  };\n\n  Thread.prototype.render = function render(_ref, _ref2) {\n    var isAuth = _ref.isAuth,\n        addComment = _ref.addComment,\n        thread = _ref.thread,\n        comments = _ref.comments,\n        users = _ref.users,\n        error = _ref.error,\n        mobile = _ref.mobile;\n    var content = _ref2.content;\n\n    return Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n      __WEBPACK_IMPORTED_MODULE_2_preact_fluid__[\"Grid\"],\n      { columns: mobile ? 5 : 12, style: { 'max-width': '900px', 'margin': '0 auto', 'padding': '10px' } },\n      error && Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n        __WEBPACK_IMPORTED_MODULE_2_preact_fluid__[\"Cell\"],\n        { left: mobile ? 1 : 4, width: 5 },\n        Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(__WEBPACK_IMPORTED_MODULE_5__components_WarningCard_js__[\"a\" /* default */], {\n          message: error,\n          label: 'Dashboard',\n          onClick: function onClick(_) {\n            return Object(__WEBPACK_IMPORTED_MODULE_3_preact_router__[\"b\" /* route */])('/dashboard');\n          }\n        })\n      ),\n      thread && Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n        __WEBPACK_IMPORTED_MODULE_2_preact_fluid__[\"Cell\"],\n        { width: mobile ? 5 : 12, middle: true },\n        Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n          'h1',\n          null,\n          thread.title\n        ),\n        Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n          'p',\n          null,\n          thread.description\n        )\n      ),\n      comments.map(function (_ref3) {\n        var content = _ref3.content,\n            user = _ref3.user;\n        return Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n          __WEBPACK_IMPORTED_MODULE_2_preact_fluid__[\"Cell\"],\n          { left: mobile ? 1 : 4, width: 5 },\n          Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n            'p',\n            null,\n            content\n          ),\n          Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n            'p',\n            null,\n            Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n              'small',\n              null,\n              user.username\n            )\n          )\n        );\n      }),\n      isAuth && Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n        __WEBPACK_IMPORTED_MODULE_2_preact_fluid__[\"Cell\"],\n        { left: mobile ? 1 : 4, width: 5 },\n        Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('textarea', {\n          rows: 4,\n          cols: 50,\n          value: content,\n          onChange: Object(__WEBPACK_IMPORTED_MODULE_4_linkstate__[\"a\" /* default */])(this, 'content') }),\n        Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n          __WEBPACK_IMPORTED_MODULE_2_preact_fluid__[\"Button\"],\n          { onClick: function onClick(_) {\n              return addComment({ thread_id: thread.id, content: content });\n            } },\n          'Add comment'\n        )\n      )\n    );\n  };\n\n  return Thread;\n}(__WEBPACK_IMPORTED_MODULE_0_preact__[\"Component\"]);\n\nvar mapStateToProps = function mapStateToProps(_ref4, props) {\n  var auth = _ref4.auth,\n      content = _ref4.content,\n      media = _ref4.media;\n\n  var propsId = parseInt(props.id);\n  var common = {\n    authUser: auth.username,\n    isAuth: auth.authenticated,\n    mobile: media.mobile\n  };\n  if (isNaN(propsId)) {\n    return _extends({}, common, {\n      error: '\\'' + props.id + '\\' is an invalid id (should be a number)',\n      thread: null,\n      comments: []\n    });\n  } else {\n    return _extends({}, common, {\n      thread: content.threads.find(function (_ref5) {\n        var id = _ref5.id;\n        return id === propsId;\n      }),\n      comments: content.comments.filter(function (_ref6) {\n        var thread_id = _ref6.thread_id;\n        return thread_id === propsId;\n      }).map(function (comment) {\n        return _extends({}, comment, {\n          user: props.getUser(comment.user_id)\n        });\n      })\n    });\n  }\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, props) {\n  return {\n    fetchData: function fetchData(_) {\n      dispatch(Object(__WEBPACK_IMPORTED_MODULE_6__actions_content_js__[\"e\" /* getThread */])(props.id));\n      dispatch(Object(__WEBPACK_IMPORTED_MODULE_6__actions_content_js__[\"d\" /* getCommentsInThread */])(props.id));\n    },\n    getUser: function getUser(id) {\n      return dispatch(Object(__WEBPACK_IMPORTED_MODULE_6__actions_content_js__[\"f\" /* getUser */])(id));\n    },\n    addComment: function addComment(data) {\n      return dispatch(Object(__WEBPACK_IMPORTED_MODULE_6__actions_content_js__[\"a\" /* addComment */])(data));\n    }\n  };\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(__WEBPACK_IMPORTED_MODULE_1_preact_redux__[\"b\" /* connect */])(mapStateToProps, mapDispatchToProps)(Thread));\n\n/***/ }),\n\n/***/ \"wtIQ\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export search */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"f\", function() { return getUser; });\n/* unused harmony export editUser */\n/* unused harmony export addCategory */\n/* unused harmony export editCategory */\n/* unused harmony export getCategory */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return getAllCategories; });\n/* unused harmony export addThread */\n/* unused harmony export editThread */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return getThread; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return getAllThreads; });\n/* unused harmony export getThreadsInCategory */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return addComment; });\n/* unused harmony export editComment */\n/* unused harmony export getComment */\n/* unused harmony export getAllComments */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return getCommentsInThread; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0____ = __webpack_require__(\"vyGZ\");\n\n\nvar getRequest = function getRequest(s) {\n  return Object(__WEBPACK_IMPORTED_MODULE_0____[\"a\" /* getJson */])('/api' + s);\n};\nvar postRequest = Object(__WEBPACK_IMPORTED_MODULE_0____[\"c\" /* postJson */])('/api/content');\n\nvar requestError = Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('CONTENT_REQUEST_ERROR');\n\n//\n// SEARCH\n//\n\nvar search = function search(query) {\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('SEARCH_PENDING'));\n    Object(__WEBPACK_IMPORTED_MODULE_0____[\"a\" /* getJson */])('/search?q=' + query)().then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\n//\n//  USER\n//\n\nvar getUser = function getUser(id) {\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('GET_USER_PENDING')());\n    getRequest('/user/' + id).then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\nvar editUser = function editUser(description, avatar) {\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('EDIT_USER_PENDING')());\n    postRequest(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('EDIT_USER')({ description: description, avatar: avatar })).then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\n//\n//  CATEGORIES\n//\n\nvar addCategory = function addCategory(title, description) {\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('ADD_CATEGORY_PENDING')());\n    postRequest(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('ADD_CATEGORY')({ title: title, description: description })).then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\nvar editCategory = function editCategory(id, title, description) {\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('EDIT_CATEGORY_PENDING')());\n    postRequest(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('EDIT_CATEGORY')({ id: id, title: title, description: description })).then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\nvar getCategory = function getCategory(id) {\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('GET_CATEGORY_PENDING')());\n    getRequest('/category/' + id).then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\nvar getAllCategories = function getAllCategories(_) {\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('GET_ALL_CATEGORIES_PENDING')());\n    getRequest('/categories').then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\n//\n// THREADS\n//\n\nvar addThread = function addThread(categoryId, userId, title, description) {\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('ADD_THREAD_PENDING')());\n    postRequest(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('ADD_THREAD')({ categoryId: categoryId, userId: userId, title: title, description: description })).then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\nvar editThread = function editThread(id, title, description) {\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('EDIT_THREAD_PENDING')());\n    postRequest(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('EDIT_THREAD')({ id: id, title: title, description: description })).then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\nvar getThread = function getThread(id) {\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('GET_THREAD_PENDING')());\n    getRequest('/thread/' + id).then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\nvar getAllThreads = function getAllThreads(_) {\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('GET_ALL_THREADS_PENDING')());\n    getRequest('/threads').then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\nvar getThreadsInCategory = function getThreadsInCategory(id) {\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('GET_THREADS_IN_CATEGORY_PENDING')({ id: id }));\n    getRequest('/category/' + id + '/threads').then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\n//\n// COMMENTS\n//\n\nvar addComment = function addComment(threadId, userId, parentId, content) {\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('ADD_COMMENT_PENDING')());\n    postRequest(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('ADD_COMMENT')({ threadId: threadId, userId: userId, parentId: parentId, content: content })).then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\nvar editComment = function editComment(id, content) {\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('EDIT_COMMENT_PENDING')());\n    postRequest(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('EDIT_COMMENT')({ id: id, content: content })).then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\nvar getComment = function getComment(id) {\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('GET_COMMENT_PENDING')());\n    getRequest('/comment/' + id).then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\nvar getAllComments = function getAllComments(_) {\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('GET_ALL_COMMENTS_PENDING')());\n    getRequest('/comments').then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\nvar getCommentsInThread = function getCommentsInThread(id) {\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('GET_COMMENTS_IN_THREAD_PENDING')({ id: id }));\n    getRequest('/thread/' + id + '/comments').then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// route-thread.chunk.42134.js","import { Component } from 'preact'\nimport { connect } from 'preact-redux'\nimport { Grid, Cell, Button } from 'preact-fluid'\nimport { route } from 'preact-router'\nimport linkState from 'linkstate'\n\nimport WarningCard from '../components/WarningCard.js'\nimport { getCommentsInThread, getThread, getUser, addComment } from '../actions/content.js'\n\nclass Thread extends Component {\n  state = {\n    content: ''\n  }\n\n  componentWillMount () {\n    this.props.fetchData()\n  }\n\n  render ({ isAuth, addComment, thread, comments, users, error, mobile }, { content }) {\n    return <Grid columns={mobile ? 5 : 12} style={{ 'max-width': '900px', 'margin': '0 auto', 'padding': '10px' }}>\n      { error &&\n      <Cell left={mobile ? 1 : 4} width={5}>\n        <WarningCard\n          message={error}\n          label='Dashboard'\n          onClick={_ => route('/dashboard')}\n        />\n      </Cell> }\n      { thread &&\n        <Cell width={mobile ? 5 : 12} middle>\n          <h1>{thread.title}</h1>\n          <p>{thread.description}</p>\n        </Cell>\n      }\n      {\n        comments.map(({ content, user }) =>\n          <Cell left={mobile ? 1 : 4} width={5}>\n            <p>{content}</p>\n            <p><small>{user.username}</small></p>\n          </Cell>\n        )\n      }\n      { isAuth &&\n      <Cell left={mobile ? 1 : 4} width={5}>\n        <textarea\n          rows={4}\n          cols={50}\n          value={content}\n          onChange={linkState(this, 'content')} />\n\n        <Button onClick={_ => addComment({ thread_id: thread.id, content })}>Add comment</Button>\n      </Cell>\n      }\n    </Grid>\n  }\n}\n\nconst mapStateToProps = ({ auth, content, media }, props) => {\n  const propsId = parseInt(props.id)\n  const common = {\n    authUser: auth.username,\n    isAuth: auth.authenticated,\n    mobile: media.mobile\n  }\n  if (isNaN(propsId)) {\n    return {\n      ...common,\n      error: `'${props.id}' is an invalid id (should be a number)`,\n      thread: null,\n      comments: []\n    }\n  } else {\n    return {\n      ...common,\n      thread: content.threads.find(({ id }) => id === propsId),\n      comments: content.comments\n        .filter(({ thread_id }) => thread_id === propsId)\n        .map(comment => ({\n          ...comment,\n          user: props.getUser(comment.user_id)\n        })\n        )\n    }\n  }\n}\n\nconst mapDispatchToProps = (dispatch, props) => ({\n  fetchData: _ => {\n    dispatch(getThread(props.id))\n    dispatch(getCommentsInThread(props.id))\n  },\n  getUser: id => dispatch(getUser(id)),\n  addComment: (data) => dispatch(addComment(data))\n})\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Thread)\n\n\n\n// WEBPACK FOOTER //\n// ./routes/thread.js","import { postJson, getJson, payload } from './'\n\nconst getRequest = s => getJson('/api' + s)\nconst postRequest = postJson('/api/content')\n\nconst requestError = payload('CONTENT_REQUEST_ERROR')\n\n//\n// SEARCH\n//\n\nexport const search = query => dispatch => {\n  dispatch(payload('SEARCH_PENDING'))\n  getJson(`/search?q=${query}`)()\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\n//\n//  USER\n//\n\nexport const getUser = id => dispatch => {\n  dispatch(payload('GET_USER_PENDING')())\n  getRequest(`/user/${id}`)\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\nexport const editUser = (description, avatar) => dispatch => {\n  dispatch(payload('EDIT_USER_PENDING')())\n  postRequest(payload('EDIT_USER')({ description, avatar }))\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\n//\n//  CATEGORIES\n//\n\nexport const addCategory = (title, description) => dispatch => {\n  dispatch(payload('ADD_CATEGORY_PENDING')())\n  postRequest(payload('ADD_CATEGORY')({ title, description }))\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\nexport const editCategory = (id, title, description) => dispatch => {\n  dispatch(payload('EDIT_CATEGORY_PENDING')())\n  postRequest(payload('EDIT_CATEGORY')({ id, title, description }))\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\nexport const getCategory = id => dispatch => {\n  dispatch(payload('GET_CATEGORY_PENDING')())\n  getRequest(`/category/${id}`)\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\nexport const getAllCategories = _ => dispatch => {\n  dispatch(payload('GET_ALL_CATEGORIES_PENDING')())\n  getRequest(`/categories`)\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\n//\n// THREADS\n//\n\nexport const addThread = (categoryId, userId, title, description) => dispatch => {\n  dispatch(payload('ADD_THREAD_PENDING')())\n  postRequest(payload('ADD_THREAD')({ categoryId, userId, title, description }))\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\nexport const editThread = (id, title, description) => dispatch => {\n  dispatch(payload('EDIT_THREAD_PENDING')())\n  postRequest(payload('EDIT_THREAD')({ id, title, description }))\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\nexport const getThread = id => dispatch => {\n  dispatch(payload('GET_THREAD_PENDING')())\n  getRequest(`/thread/${id}`)\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\nexport const getAllThreads = _ => dispatch => {\n  dispatch(payload('GET_ALL_THREADS_PENDING')())\n  getRequest(`/threads`)\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\nexport const getThreadsInCategory = id => dispatch => {\n  dispatch(payload('GET_THREADS_IN_CATEGORY_PENDING')({ id }))\n  getRequest(`/category/${id}/threads`)\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\n//\n// COMMENTS\n//\n\nexport const addComment = (threadId, userId, parentId, content) => dispatch => {\n  dispatch(payload('ADD_COMMENT_PENDING')())\n  postRequest(payload('ADD_COMMENT')({ threadId, userId, parentId, content }))\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\nexport const editComment = (id, content) => dispatch => {\n  dispatch(payload('EDIT_COMMENT_PENDING')())\n  postRequest(payload('EDIT_COMMENT')({ id, content }))\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\nexport const getComment = id => dispatch => {\n  dispatch(payload('GET_COMMENT_PENDING')())\n  getRequest(`/comment/${id}`)\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\nexport const getAllComments = _ => dispatch => {\n  dispatch(payload('GET_ALL_COMMENTS_PENDING')())\n  getRequest(`/comments`)\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\nexport const getCommentsInThread = id => dispatch => {\n  dispatch(payload('GET_COMMENTS_IN_THREAD_PENDING')({ id }))\n  getRequest(`/thread/${id}/comments`)\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./actions/content.js"],"sourceRoot":""}