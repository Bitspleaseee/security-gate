{"version":3,"sources":["webpack:///route-thread.chunk.9f6fc.js","webpack:///./routes/thread.js","webpack:///./actions/content.js"],"names":["webpackJsonp","snAh","module","__webpack_exports__","__webpack_require__","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_preact__","__WEBPACK_IMPORTED_MODULE_1_preact_redux__","n","__WEBPACK_IMPORTED_MODULE_2_preact_fluid__","__WEBPACK_IMPORTED_MODULE_3_preact_router__","__WEBPACK_IMPORTED_MODULE_4_linkstate__","__WEBPACK_IMPORTED_MODULE_5__components_InfoCard_js__","__WEBPACK_IMPORTED_MODULE_6__actions_content_js__","_extends","assign","target","i","arguments","length","source","key","hasOwnProperty","Thread","_Component","_temp","_this","_ret","_len","args","Array","_key","this","apply","concat","render","_ref","_ref2","addComment","thread","comments","idError","error","mobile","acceptError","content","columns","style","max-width","margin","padding","width","middle","title","description","left","type","message","label","action","route","map","_ref3","user","username","rows","onChange","linkState","onClick","Component","mapStateToProps","_ref4","props","auth","media","propsId","parseInt","id","common","authUser","isAuth","authenticated","isNaN","threads","find","_ref5","filter","_ref6","thread_id","comment","getUser","user_id","mapDispatchToProps","dispatch","fetchData","getThread","getCommentsInThread","connect","wtIQ","d","getAllCategories","getAllThreads","addThread","__WEBPACK_IMPORTED_MODULE_0____","getRequest","getToRedux","postRequest","postToRedux","getState","users","thr_id","_ref7","category_id","_ref9","parent_id","payload"],"mappings":"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","file":"route-thread.chunk.9f6fc.js","sourcesContent":["webpackJsonp([2],{\n\n/***/ \"snAh\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact__ = __webpack_require__(\"KM04\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_preact__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_preact_redux__ = __webpack_require__(\"E/bI\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_preact_fluid__ = __webpack_require__(\"PbA0\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_preact_fluid___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_preact_fluid__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_preact_router__ = __webpack_require__(\"/QC5\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_linkstate__ = __webpack_require__(\"CSCC\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__components_InfoCard_js__ = __webpack_require__(\"51t8\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__actions_content_js__ = __webpack_require__(\"wtIQ\");\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n\n\n\nvar Thread = function (_Component) {\n  _inherits(Thread, _Component);\n\n  function Thread() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Thread);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.render = function (_ref, _ref2) {\n      var isAuth = _ref.isAuth,\n          addComment = _ref.addComment,\n          thread = _ref.thread,\n          comments = _ref.comments,\n          idError = _ref.idError,\n          error = _ref.error,\n          mobile = _ref.mobile,\n          acceptError = _ref.acceptError;\n      var content = _ref2.content;\n      return Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n        __WEBPACK_IMPORTED_MODULE_2_preact_fluid__[\"Grid\"],\n        { columns: mobile ? 5 : 12, style: { 'max-width': '900px', 'margin': '0 auto', 'padding': '10px' } },\n        thread && Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n          __WEBPACK_IMPORTED_MODULE_2_preact_fluid__[\"Cell\"],\n          { width: mobile ? 5 : 12, middle: true },\n          Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n            'h1',\n            null,\n            thread.title\n          ),\n          Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n            'p',\n            null,\n            thread.description\n          )\n        ),\n        idError && Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n          __WEBPACK_IMPORTED_MODULE_2_preact_fluid__[\"Cell\"],\n          { left: mobile ? 1 : 4, width: 5 },\n          Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(__WEBPACK_IMPORTED_MODULE_5__components_InfoCard_js__[\"a\" /* default */], {\n            type: 'error',\n            message: idError,\n            label: 'Dashboard',\n            action: function action(_) {\n              return Object(__WEBPACK_IMPORTED_MODULE_3_preact_router__[\"b\" /* route */])('/dashboard');\n            }\n          })\n        ),\n        error && Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n          __WEBPACK_IMPORTED_MODULE_2_preact_fluid__[\"Cell\"],\n          { left: mobile ? 1 : 4, width: 5 },\n          Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(__WEBPACK_IMPORTED_MODULE_5__components_InfoCard_js__[\"a\" /* default */], {\n            type: 'error',\n            message: error,\n            label: 'Ok',\n            action: acceptError\n          })\n        ),\n        comments.map(function (_ref3) {\n          var content = _ref3.content,\n              user = _ref3.user;\n          return Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n            __WEBPACK_IMPORTED_MODULE_2_preact_fluid__[\"Cell\"],\n            { left: mobile ? 1 : 4, width: 5 },\n            Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n              'p',\n              null,\n              content\n            ),\n            Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n              'p',\n              null,\n              Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n                'small',\n                null,\n                user.username\n              )\n            )\n          );\n        }),\n        thread && Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n          __WEBPACK_IMPORTED_MODULE_2_preact_fluid__[\"Cell\"],\n          { left: mobile ? 1 : 4, width: 5 },\n          Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('textarea', {\n            rows: 4,\n            value: content,\n            onChange: Object(__WEBPACK_IMPORTED_MODULE_4_linkstate__[\"a\" /* default */])(_this, 'content') }),\n          Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n            __WEBPACK_IMPORTED_MODULE_2_preact_fluid__[\"Button\"],\n            { onClick: function onClick(_) {\n                return addComment(content);\n              } },\n            'Add comment'\n          )\n        )\n      );\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  return Thread;\n}(__WEBPACK_IMPORTED_MODULE_0_preact__[\"Component\"]);\n\nvar mapStateToProps = function mapStateToProps(_ref4, props) {\n  var auth = _ref4.auth,\n      content = _ref4.content,\n      media = _ref4.media;\n\n  var propsId = parseInt(props.id);\n  var common = {\n    authUser: auth.username,\n    isAuth: auth.authenticated,\n    mobile: media.mobile\n  };\n  if (isNaN(propsId)) {\n    return _extends({}, common, {\n      idError: '\\'' + props.id + '\\' is an invalid id (should be a number)',\n      thread: null,\n      comments: []\n    });\n  } else {\n    return _extends({}, common, {\n      error: content.error,\n      thread: content.threads.find(function (_ref5) {\n        var id = _ref5.id;\n        return id === propsId;\n      }),\n      comments: content.comments.filter(function (_ref6) {\n        var thread_id = _ref6.thread_id;\n        return thread_id === propsId;\n      }).map(function (comment) {\n        return _extends({}, comment, {\n          user: props.getUser(comment.user_id)\n        });\n      })\n    });\n  }\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, props) {\n  var propsId = parseInt(props.id);\n  if (isNaN(propsId)) {\n    return {\n      fetchData: function fetchData(_) {},\n      getUser: function getUser(_) {},\n      addComment: function addComment(_) {}\n    };\n  } else {\n    return {\n      fetchData: function fetchData(_) {\n        dispatch(Object(__WEBPACK_IMPORTED_MODULE_6__actions_content_js__[\"g\" /* getThread */])(propsId));\n        dispatch(Object(__WEBPACK_IMPORTED_MODULE_6__actions_content_js__[\"f\" /* getCommentsInThread */])(propsId));\n      },\n      getUser: function getUser(id) {\n        return dispatch(Object(__WEBPACK_IMPORTED_MODULE_6__actions_content_js__[\"h\" /* getUser */])(id));\n      },\n      addComment: function addComment(content) {\n        return dispatch(Object(__WEBPACK_IMPORTED_MODULE_6__actions_content_js__[\"b\" /* addComment */])({ thread_id: propsId, content: content }));\n      },\n      acceptError: function acceptError(_) {\n        return dispatch(Object(__WEBPACK_IMPORTED_MODULE_6__actions_content_js__[\"a\" /* acceptError */])());\n      }\n    };\n  }\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(__WEBPACK_IMPORTED_MODULE_1_preact_redux__[\"b\" /* connect */])(mapStateToProps, mapDispatchToProps)(Thread));\n\n/***/ }),\n\n/***/ \"wtIQ\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export search */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"h\", function() { return getUser; });\n/* unused harmony export getCategory */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return getAllCategories; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"g\", function() { return getThread; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return getAllThreads; });\n/* unused harmony export getThreadsInCategory */\n/* unused harmony export getComment */\n/* unused harmony export getAllComments */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"f\", function() { return getCommentsInThread; });\n/* unused harmony export editUser */\n/* unused harmony export addCategory */\n/* unused harmony export editCategory */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return addThread; });\n/* unused harmony export editThread */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return addComment; });\n/* unused harmony export editComment */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return acceptError; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0____ = __webpack_require__(\"vyGZ\");\n\n\n// A GET request to the host specified in 'actions/index.js'\n// This function returns a function which looks like:\n//\n// type => data => dispatch => { .. }\nvar getRequest = Object(__WEBPACK_IMPORTED_MODULE_0____[\"a\" /* getToRedux */])('/api')('LOCAL_CONTENT_ERROR');\n\nvar postRequest = Object(__WEBPACK_IMPORTED_MODULE_0____[\"c\" /* postToRedux */])('/api/content')('LOCAL_CONTENT_ERROR');\n\n// All of these functions below this point return a function when called. The\n// returning function looks like:\n//\n// dispatch => { .. }\n\nvar search = function search(query) {\n  return getRequest('SEARCH_QUERY')('/search?q=' + query);\n};\nvar getUser = function getUser(user_id) {\n  return function (dispatch, getState) {\n    var _getState = getState(),\n        content = _getState.content;\n\n    if (!content.users.find(function (_ref) {\n      var id = _ref.id;\n      return id === user_id;\n    })) {\n      return getRequest('GET_USER')('/user/' + user_id)(dispatch);\n    }\n  };\n};\nvar getCategory = function getCategory(cat_id) {\n  return function (dispatch, getState) {\n    var _getState2 = getState(),\n        content = _getState2.content;\n\n    if (!content.categories.find(function (_ref2) {\n      var id = _ref2.id;\n      return id === cat_id;\n    })) {\n      return getRequest('GET_CATEGORY')('/category/' + cat_id)(dispatch);\n    }\n  };\n};\nvar getAllCategories = function getAllCategories(_) {\n  return getRequest('GET_ALL_CATEGORIES')('/categories');\n};\nvar getThread = function getThread(thr_id) {\n  return function (dispatch, getState) {\n    var _getState3 = getState(),\n        content = _getState3.content;\n\n    if (!content.threads.find(function (_ref3) {\n      var id = _ref3.id;\n      return id === thr_id;\n    })) {\n      getRequest('GET_THREAD')('/thread/' + thr_id)(dispatch);\n    }\n  };\n};\nvar getAllThreads = function getAllThreads(_) {\n  return getRequest('GET_ALL_THREADS')('/threads');\n};\nvar getThreadsInCategory = function getThreadsInCategory(cat_id) {\n  return getRequest('GET_THREADS_IN_CATEGORY')('/category/' + cat_id + '/threads');\n};\nvar getComment = function getComment(cmd_id) {\n  return getRequest('GET_COMMENT')('/comment/' + cmd_id);\n};\nvar getAllComments = function getAllComments(_) {\n  return getRequest('GET_ALL_COMMENTS')('/comments');\n};\nvar getCommentsInThread = function getCommentsInThread(thr_id) {\n  return getRequest('GET_COMMENTS_IN_THREAD')('/thread/' + thr_id + '/comments');\n};\n\nvar editUser = function editUser(_ref4) {\n  var description = _ref4.description,\n      avatar = _ref4.avatar;\n  return postRequest('EDIT_USER')({ description: description, avatar: avatar });\n};\nvar addCategory = function addCategory(_ref5) {\n  var title = _ref5.title,\n      description = _ref5.description;\n  return postRequest('ADD_CATEGORY')({ title: title, description: description });\n};\nvar editCategory = function editCategory(_ref6) {\n  var id = _ref6.id,\n      title = _ref6.title,\n      description = _ref6.description;\n  return postRequest('EDIT_CATEGORY')({ id: id, title: title, description: description });\n};\nvar addThread = function addThread(_ref7) {\n  var category_id = _ref7.category_id,\n      title = _ref7.title,\n      description = _ref7.description;\n  return postRequest('ADD_THREAD')({ category_id: category_id, title: title, description: description });\n};\nvar editThread = function editThread(_ref8) {\n  var id = _ref8.id,\n      title = _ref8.title,\n      description = _ref8.description;\n  return postRequest('EDIT_THREAD')({ id: id, title: title, description: description });\n};\nvar addComment = function addComment(_ref9) {\n  var thread_id = _ref9.thread_id,\n      parent_id = _ref9.parent_id,\n      content = _ref9.content;\n  return postRequest('ADD_COMMENT')({ thread_id: thread_id, parent_id: parent_id, content: content });\n};\nvar editComment = function editComment(_ref10) {\n  var id = _ref10.id,\n      content = _ref10.content;\n  return postRequest('EDIT_COMMENT')({ id: id, content: content });\n};\n\nvar acceptError = function acceptError(_) {\n  return Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('ACCEPTED_ERROR')();\n};\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// route-thread.chunk.9f6fc.js","import { Component } from 'preact'\nimport { connect } from 'preact-redux'\nimport { Grid, Cell, Button } from 'preact-fluid'\nimport { route } from 'preact-router'\nimport linkState from 'linkstate'\n\nimport InfoCard from '../components/InfoCard.js'\nimport { getCommentsInThread, getThread, getUser, addComment, acceptError } from '../actions/content.js'\n\nclass Thread extends Component {\n  render = (\n    { isAuth, addComment, thread, comments, idError, error, mobile, acceptError },\n    { content }\n  ) => <Grid columns={mobile ? 5 : 12} style={{ 'max-width': '900px', 'margin': '0 auto', 'padding': '10px' }}>\n    { thread &&\n    <Cell width={mobile ? 5 : 12} middle>\n      <h1>{thread.title}</h1>\n      <p>{thread.description}</p>\n    </Cell>\n    }\n    { idError &&\n      <Cell left={mobile ? 1 : 4} width={5}>\n        <InfoCard\n          type='error'\n          message={idError}\n          label='Dashboard'\n          action={_ => route('/dashboard')}\n        />\n      </Cell>\n    }\n    { error &&\n      <Cell left={mobile ? 1 : 4} width={5}>\n        <InfoCard\n          type='error'\n          message={error}\n          label='Ok'\n          action={acceptError}\n        />\n      </Cell>\n    }\n    {\n      comments.map(({ content, user }) =>\n        <Cell left={mobile ? 1 : 4} width={5}>\n          <p>{content}</p>\n          <p><small>{user.username}</small></p>\n        </Cell>\n      )\n    }\n    { thread && <Cell left={mobile ? 1 : 4} width={5}>\n      <textarea\n        rows={4}\n        value={content}\n        onChange={linkState(this, 'content')} />\n\n      <Button onClick={_ => addComment(content)}>Add comment</Button>\n    </Cell>\n    }\n  </Grid>\n}\n\nconst mapStateToProps = ({ auth, content, media }, props) => {\n  const propsId = parseInt(props.id)\n  const common = {\n    authUser: auth.username,\n    isAuth: auth.authenticated,\n    mobile: media.mobile\n  }\n  if (isNaN(propsId)) {\n    return {\n      ...common,\n      idError: `'${props.id}' is an invalid id (should be a number)`,\n      thread: null,\n      comments: []\n    }\n  } else {\n    return {\n      ...common,\n      error: content.error,\n      thread: content.threads.find(({ id }) => id === propsId),\n      comments: content.comments\n        .filter(({ thread_id }) => thread_id === propsId)\n        .map(comment => ({\n          ...comment,\n          user: props.getUser(comment.user_id)\n        })\n        )\n    }\n  }\n}\n\nconst mapDispatchToProps = (dispatch, props) => {\n  const propsId = parseInt(props.id)\n  if (isNaN(propsId)) {\n    return {\n      fetchData: _ => {},\n      getUser: _ => {},\n      addComment: _ => {}\n    }\n  } else {\n    return {\n      fetchData: _ => {\n        dispatch(getThread(propsId))\n        dispatch(getCommentsInThread(propsId))\n      },\n      getUser: id => dispatch(getUser(id)),\n      addComment: content => dispatch(addComment({ thread_id: propsId, content })),\n      acceptError: _ => dispatch(acceptError())\n    }\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Thread)\n\n\n\n// WEBPACK FOOTER //\n// ./routes/thread.js","import { postToRedux, getToRedux, payload } from './'\n\n// A GET request to the host specified in 'actions/index.js'\n// This function returns a function which looks like:\n//\n// type => data => dispatch => { .. }\nconst getRequest = getToRedux('/api')('LOCAL_CONTENT_ERROR')\n\nconst postRequest = postToRedux('/api/content')('LOCAL_CONTENT_ERROR')\n\n// All of these functions below this point return a function when called. The\n// returning function looks like:\n//\n// dispatch => { .. }\n\nexport const search = query => getRequest('SEARCH_QUERY')(`/search?q=${query}`)\nexport const getUser = user_id => (dispatch, getState) => {\n  const { content } = getState()\n  if (!content.users.find(({ id }) => id === user_id)) {\n    return getRequest('GET_USER')(`/user/${user_id}`)(dispatch)\n  }\n}\nexport const getCategory = cat_id => (dispatch, getState) => {\n  const { content } = getState()\n  if (!content.categories.find(({ id }) => id === cat_id)) {\n    return getRequest('GET_CATEGORY')(`/category/${cat_id}`)(dispatch)\n  }\n}\nexport const getAllCategories = _ => getRequest('GET_ALL_CATEGORIES')(`/categories`)\nexport const getThread = thr_id => (dispatch, getState) => {\n  const { content } = getState()\n  if (!content.threads.find(({ id }) => id === thr_id)) {\n    getRequest('GET_THREAD')(`/thread/${thr_id}`)(dispatch)\n  }\n}\nexport const getAllThreads = _ => getRequest('GET_ALL_THREADS')(`/threads`)\nexport const getThreadsInCategory = cat_id => getRequest('GET_THREADS_IN_CATEGORY')(`/category/${cat_id}/threads`)\nexport const getComment = cmd_id => getRequest('GET_COMMENT')(`/comment/${cmd_id}`)\nexport const getAllComments = _ => getRequest('GET_ALL_COMMENTS')(`/comments`)\nexport const getCommentsInThread = thr_id => getRequest('GET_COMMENTS_IN_THREAD')(`/thread/${thr_id}/comments`)\n\nexport const editUser = ({ description, avatar }) =>\n  postRequest('EDIT_USER')({ description, avatar })\nexport const addCategory = ({ title, description }) =>\n  postRequest('ADD_CATEGORY')({ title, description })\nexport const editCategory = ({ id, title, description }) =>\n  postRequest('EDIT_CATEGORY')({ id, title, description })\nexport const addThread = ({ category_id, title, description }) =>\n  postRequest('ADD_THREAD')({ category_id, title, description })\nexport const editThread = ({ id, title, description }) =>\n  postRequest('EDIT_THREAD')({ id, title, description })\nexport const addComment = ({ thread_id, parent_id, content }) =>\n  postRequest('ADD_COMMENT')({ thread_id, parent_id, content })\nexport const editComment = ({ id, content }) =>\n  postRequest('EDIT_COMMENT')({ id, content })\n\nexport const acceptError = _ =>\n  payload('ACCEPTED_ERROR')()\n\n\n\n// WEBPACK FOOTER //\n// ./actions/content.js"],"sourceRoot":""}