{"version":3,"sources":["webpack:///route-thread.chunk.28e67.js","webpack:///./components/WarningCard.js","webpack:///./routes/thread.js","webpack:///./actions/content.js"],"names":["webpackJsonp","snAh","module","__webpack_exports__","__webpack_require__","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","preact_min","preact_redux_esm","lib","preact_router_es","linkstate_es","WarningCard__ref2","title","WarningCard","_ref","label","onClick","message","style","background-color","color","right","actions_content","_extends","assign","target","i","arguments","length","source","key","hasOwnProperty","Thread","_Component","_temp","_this","_ret","_len","args","Array","_key","this","apply","concat","state","content","componentWillMount","props","fetchData","render","_ref2","isAuth","addComment","thread","comments","error","mobile","columns","max-width","margin","padding","left","width","route","middle","description","map","_ref3","user","username","rows","cols","onChange","linkState","Component","mapStateToProps","_ref4","auth","media","propsId","parseInt","id","common","authUser","authenticated","isNaN","threads","find","_ref5","filter","_ref6","thread_id","comment","getUser","user_id","mapDispatchToProps","dispatch","getThread","getCommentsInThread","connect","wtIQ","d","getAllCategories","getAllThreads","__WEBPACK_IMPORTED_MODULE_0____","getRequest","s","getJson","postRequest","postJson","requestError","payload","then","res","catch","e","parent_id"],"mappings":"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","file":"route-thread.chunk.28e67.js","sourcesContent":["webpackJsonp([2],{\n\n/***/ \"snAh\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ../node_modules/preact/dist/preact.min.js\nvar preact_min = __webpack_require__(\"KM04\");\nvar preact_min_default = /*#__PURE__*/__webpack_require__.n(preact_min);\n\n// EXTERNAL MODULE: ../node_modules/preact-redux/dist/preact-redux.esm.js\nvar preact_redux_esm = __webpack_require__(\"E/bI\");\n\n// EXTERNAL MODULE: ../node_modules/preact-fluid/lib/index.js\nvar lib = __webpack_require__(\"PbA0\");\nvar lib_default = /*#__PURE__*/__webpack_require__.n(lib);\n\n// EXTERNAL MODULE: ../node_modules/preact-router/dist/preact-router.es.js\nvar preact_router_es = __webpack_require__(\"/QC5\");\n\n// EXTERNAL MODULE: ../node_modules/linkstate/dist/linkstate.es.js\nvar linkstate_es = __webpack_require__(\"CSCC\");\n\n// CONCATENATED MODULE: ./components/WarningCard.js\n\n\n\nvar WarningCard__ref2 = Object(preact_min[\"h\"])(lib[\"CardHeader\"], {\n  title: 'Warning' });\n\n/* harmony default export */ var WarningCard = (function (_ref) {\n  var label = _ref.label,\n      onClick = _ref.onClick,\n      message = _ref.message;\n  return Object(preact_min[\"h\"])(\n    lib[\"Card\"],\n    { style: { 'background-color': '#FF9800', 'color': '#212121' } },\n    WarningCard__ref2,\n    Object(preact_min[\"h\"])(\n      lib[\"CardBody\"],\n      null,\n      message\n    ),\n    Object(preact_min[\"h\"])(lib[\"CardFooter\"], {\n      right: Object(preact_min[\"h\"])(\n        lib[\"Button\"],\n        { onClick: onClick },\n        label\n      ) })\n  );\n});\n// EXTERNAL MODULE: ./actions/content.js\nvar actions_content = __webpack_require__(\"wtIQ\");\n\n// CONCATENATED MODULE: ../node_modules/babel-loader/lib??ref--0!./routes/thread.js\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n\n\n\nvar thread_Thread = function (_Component) {\n  _inherits(Thread, _Component);\n\n  function Thread() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Thread);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = {\n      content: ''\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  Thread.prototype.componentWillMount = function componentWillMount() {\n    this.props.fetchData();\n  };\n\n  Thread.prototype.render = function render(_ref, _ref2) {\n    var isAuth = _ref.isAuth,\n        addComment = _ref.addComment,\n        thread = _ref.thread,\n        comments = _ref.comments,\n        users = _ref.users,\n        error = _ref.error,\n        mobile = _ref.mobile;\n    var content = _ref2.content;\n\n    return Object(preact_min[\"h\"])(\n      lib[\"Grid\"],\n      { columns: mobile ? 5 : 12, style: { 'max-width': '900px', 'margin': '0 auto', 'padding': '10px' } },\n      error && Object(preact_min[\"h\"])(\n        lib[\"Cell\"],\n        { left: mobile ? 1 : 4, width: 5 },\n        Object(preact_min[\"h\"])(WarningCard, {\n          message: error,\n          label: 'Dashboard',\n          onClick: function onClick(_) {\n            return Object(preact_router_es[\"b\" /* route */])('/dashboard');\n          }\n        })\n      ),\n      thread && Object(preact_min[\"h\"])(\n        lib[\"Cell\"],\n        { width: mobile ? 5 : 12, middle: true },\n        Object(preact_min[\"h\"])(\n          'h1',\n          null,\n          thread.title\n        ),\n        Object(preact_min[\"h\"])(\n          'p',\n          null,\n          thread.description\n        )\n      ),\n      comments.map(function (_ref3) {\n        var content = _ref3.content,\n            user = _ref3.user;\n        return Object(preact_min[\"h\"])(\n          lib[\"Cell\"],\n          { left: mobile ? 1 : 4, width: 5 },\n          Object(preact_min[\"h\"])(\n            'p',\n            null,\n            content\n          ),\n          Object(preact_min[\"h\"])(\n            'p',\n            null,\n            Object(preact_min[\"h\"])(\n              'small',\n              null,\n              user.username\n            )\n          )\n        );\n      }),\n      isAuth && Object(preact_min[\"h\"])(\n        lib[\"Cell\"],\n        { left: mobile ? 1 : 4, width: 5 },\n        Object(preact_min[\"h\"])('textarea', {\n          rows: 4,\n          cols: 50,\n          value: content,\n          onChange: Object(linkstate_es[\"a\" /* default */])(this, 'content') }),\n        Object(preact_min[\"h\"])(\n          lib[\"Button\"],\n          { onClick: function onClick(_) {\n              return addComment(content);\n            } },\n          'Add comment'\n        )\n      )\n    );\n  };\n\n  return Thread;\n}(preact_min[\"Component\"]);\n\nvar mapStateToProps = function mapStateToProps(_ref4, props) {\n  var auth = _ref4.auth,\n      content = _ref4.content,\n      media = _ref4.media;\n\n  var propsId = parseInt(props.id);\n  var common = {\n    authUser: auth.username,\n    isAuth: auth.authenticated,\n    mobile: media.mobile\n  };\n  if (isNaN(propsId)) {\n    return _extends({}, common, {\n      error: '\\'' + props.id + '\\' is an invalid id (should be a number)',\n      thread: null,\n      comments: []\n    });\n  } else {\n    return _extends({}, common, {\n      thread: content.threads.find(function (_ref5) {\n        var id = _ref5.id;\n        return id === propsId;\n      }),\n      comments: content.comments.filter(function (_ref6) {\n        var thread_id = _ref6.thread_id;\n        return thread_id === propsId;\n      }).map(function (comment) {\n        return _extends({}, comment, {\n          user: props.getUser(comment.user_id)\n        });\n      })\n    });\n  }\n};\n\nvar thread_mapDispatchToProps = function mapDispatchToProps(dispatch, props) {\n  var propsId = parseInt(props.id);\n  if (isNaN(propsId)) {\n    return {\n      fetchData: function fetchData(_) {},\n      getUser: function getUser(_) {},\n      addComment: function addComment(_) {}\n    };\n  } else {\n    return {\n      fetchData: function fetchData(_) {\n        dispatch(Object(actions_content[\"e\" /* getThread */])(propsId));\n        dispatch(Object(actions_content[\"d\" /* getCommentsInThread */])(propsId));\n      },\n      getUser: function getUser(id) {\n        return dispatch(Object(actions_content[\"f\" /* getUser */])(id));\n      },\n      addComment: function addComment(content) {\n        return dispatch(Object(actions_content[\"a\" /* addComment */])({ thread_id: propsId, content: content }));\n      }\n    };\n  }\n};\n\n/* harmony default export */ var lib__ref__0_routes_thread = __webpack_exports__[\"default\"] = (Object(preact_redux_esm[\"b\" /* connect */])(mapStateToProps, thread_mapDispatchToProps)(thread_Thread));\n\n/***/ }),\n\n/***/ \"wtIQ\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export search */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"f\", function() { return getUser; });\n/* unused harmony export editUser */\n/* unused harmony export addCategory */\n/* unused harmony export editCategory */\n/* unused harmony export getCategory */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return getAllCategories; });\n/* unused harmony export addThread */\n/* unused harmony export editThread */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return getThread; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return getAllThreads; });\n/* unused harmony export getThreadsInCategory */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return addComment; });\n/* unused harmony export editComment */\n/* unused harmony export getComment */\n/* unused harmony export getAllComments */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return getCommentsInThread; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0____ = __webpack_require__(\"vyGZ\");\n\n\nvar getRequest = function getRequest(s) {\n  return Object(__WEBPACK_IMPORTED_MODULE_0____[\"a\" /* getJson */])('/api' + s);\n};\nvar postRequest = Object(__WEBPACK_IMPORTED_MODULE_0____[\"c\" /* postJson */])('/api/content');\n\nvar requestError = Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('CONTENT_REQUEST_ERROR');\n\n//\n// SEARCH\n//\n\nvar search = function search(query) {\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('SEARCH_PENDING'));\n    Object(__WEBPACK_IMPORTED_MODULE_0____[\"a\" /* getJson */])('/search?q=' + query)().then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\n//\n//  USER\n//\n\nvar getUser = function getUser(id) {\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('GET_USER_PENDING')());\n    getRequest('/user/' + id).then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\nvar editUser = function editUser(_ref) {\n  var description = _ref.description,\n      avatar = _ref.avatar;\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('EDIT_USER_PENDING')());\n    postRequest(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('EDIT_USER')({ description: description, avatar: avatar })).then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\n//\n//  CATEGORIES\n//\n\nvar addCategory = function addCategory(_ref2) {\n  var title = _ref2.title,\n      description = _ref2.description;\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('ADD_CATEGORY_PENDING')());\n    postRequest(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('ADD_CATEGORY')({ title: title, description: description })).then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\nvar editCategory = function editCategory(_ref3) {\n  var id = _ref3.id,\n      title = _ref3.title,\n      description = _ref3.description;\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('EDIT_CATEGORY_PENDING')());\n    postRequest(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('EDIT_CATEGORY')({ id: id, title: title, description: description })).then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\nvar getCategory = function getCategory(id) {\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('GET_CATEGORY_PENDING')());\n    getRequest('/category/' + id).then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\nvar getAllCategories = function getAllCategories(_) {\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('GET_ALL_CATEGORIES_PENDING')());\n    getRequest('/categories').then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\n//\n// THREADS\n//\n\nvar addThread = function addThread(_ref4) {\n  var category_id = _ref4.category_id,\n      user_id = _ref4.user_id,\n      title = _ref4.title,\n      description = _ref4.description;\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('ADD_THREAD_PENDING')());\n    postRequest(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('ADD_THREAD')({ categoryId: categoryId, userId: userId, title: title, description: description })).then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\nvar editThread = function editThread(_ref5) {\n  var id = _ref5.id,\n      title = _ref5.title,\n      description = _ref5.description;\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('EDIT_THREAD_PENDING')());\n    postRequest(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('EDIT_THREAD')({ id: id, title: title, description: description })).then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\nvar getThread = function getThread(id) {\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('GET_THREAD_PENDING')());\n    getRequest('/thread/' + id).then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\nvar getAllThreads = function getAllThreads(_) {\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('GET_ALL_THREADS_PENDING')());\n    getRequest('/threads').then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\nvar getThreadsInCategory = function getThreadsInCategory(id) {\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('GET_THREADS_IN_CATEGORY_PENDING')({ id: id }));\n    getRequest('/category/' + id + '/threads').then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\n//\n// COMMENTS\n//\n\nvar addComment = function addComment(_ref6) {\n  var thread_id = _ref6.thread_id,\n      parent_id = _ref6.parent_id,\n      content = _ref6.content;\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('ADD_COMMENT_PENDING')());\n    postRequest(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('ADD_COMMENT')({ thread_id: thread_id, parent_id: parent_id, content: content })).then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\nvar editComment = function editComment(_ref7) {\n  var id = _ref7.id,\n      content = _ref7.content;\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('EDIT_COMMENT_PENDING')());\n    postRequest(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('EDIT_COMMENT')({ id: id, content: content })).then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\nvar getComment = function getComment(id) {\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('GET_COMMENT_PENDING')());\n    getRequest('/comment/' + id).then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\nvar getAllComments = function getAllComments(_) {\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('GET_ALL_COMMENTS_PENDING')());\n    getRequest('/comments').then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\nvar getCommentsInThread = function getCommentsInThread(id) {\n  return function (dispatch) {\n    dispatch(Object(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* payload */])('GET_COMMENTS_IN_THREAD_PENDING')({ id: id }));\n    getRequest('/thread/' + id + '/comments').then(function (res) {\n      return dispatch(res);\n    }).catch(function (e) {\n      return dispatch(requestError(e));\n    });\n  };\n};\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// route-thread.chunk.28e67.js","import { Card, CardHeader, CardFooter, CardBody, Button } from 'preact-fluid'\n\nexport default ({ label, onClick, message }) =>\n  <Card style={{ 'background-color': '#FF9800', 'color': '#212121' }}>\n    <CardHeader\n      title='Warning' />\n    <CardBody>{message}</CardBody>\n    <CardFooter\n      right={<Button onClick={onClick}>{label}</Button>} />\n  </Card>\n\n\n\n// WEBPACK FOOTER //\n// ./components/WarningCard.js","import { Component } from 'preact'\nimport { connect } from 'preact-redux'\nimport { Grid, Cell, Button } from 'preact-fluid'\nimport { route } from 'preact-router'\nimport linkState from 'linkstate'\n\nimport WarningCard from '../components/WarningCard.js'\nimport { getCommentsInThread, getThread, getUser, addComment } from '../actions/content.js'\n\nclass Thread extends Component {\n  state = {\n    content: ''\n  }\n\n  componentWillMount () {\n    this.props.fetchData()\n  }\n\n  render ({ isAuth, addComment, thread, comments, users, error, mobile }, { content }) {\n    return <Grid columns={mobile ? 5 : 12} style={{ 'max-width': '900px', 'margin': '0 auto', 'padding': '10px' }}>\n      { error &&\n      <Cell left={mobile ? 1 : 4} width={5}>\n        <WarningCard\n          message={error}\n          label='Dashboard'\n          onClick={_ => route('/dashboard')}\n        />\n      </Cell> }\n      { thread &&\n        <Cell width={mobile ? 5 : 12} middle>\n          <h1>{thread.title}</h1>\n          <p>{thread.description}</p>\n        </Cell>\n      }\n      {\n        comments.map(({ content, user }) =>\n          <Cell left={mobile ? 1 : 4} width={5}>\n            <p>{content}</p>\n            <p><small>{user.username}</small></p>\n          </Cell>\n        )\n      }\n      { isAuth &&\n      <Cell left={mobile ? 1 : 4} width={5}>\n        <textarea\n          rows={4}\n          cols={50}\n          value={content}\n          onChange={linkState(this, 'content')} />\n\n        <Button onClick={_ => addComment(content)}>Add comment</Button>\n      </Cell>\n      }\n    </Grid>\n  }\n}\n\nconst mapStateToProps = ({ auth, content, media }, props) => {\n  const propsId = parseInt(props.id)\n  const common = {\n    authUser: auth.username,\n    isAuth: auth.authenticated,\n    mobile: media.mobile\n  }\n  if (isNaN(propsId)) {\n    return {\n      ...common,\n      error: `'${props.id}' is an invalid id (should be a number)`,\n      thread: null,\n      comments: []\n    }\n  } else {\n    return {\n      ...common,\n      thread: content.threads.find(({ id }) => id === propsId),\n      comments: content.comments\n        .filter(({ thread_id }) => thread_id === propsId)\n        .map(comment => ({\n          ...comment,\n          user: props.getUser(comment.user_id)\n        })\n        )\n    }\n  }\n}\n\nconst mapDispatchToProps = (dispatch, props) => {\n  const propsId = parseInt(props.id)\n  if (isNaN(propsId)) {\n    return {\n      fetchData: _ => {},\n      getUser: _ => {},\n      addComment: _ => {}\n    }\n  } else {\n    return {\n      fetchData: _ => {\n        dispatch(getThread(propsId))\n        dispatch(getCommentsInThread(propsId))\n      },\n      getUser: id => dispatch(getUser(id)),\n      addComment: content => dispatch(addComment({ thread_id: propsId, content }))\n    }\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Thread)\n\n\n\n// WEBPACK FOOTER //\n// ./routes/thread.js","import { postJson, getJson, payload } from './'\n\nconst getRequest = s => getJson('/api' + s)\nconst postRequest = postJson('/api/content')\n\nconst requestError = payload('CONTENT_REQUEST_ERROR')\n\n//\n// SEARCH\n//\n\nexport const search = query => dispatch => {\n  dispatch(payload('SEARCH_PENDING'))\n  getJson(`/search?q=${query}`)()\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\n//\n//  USER\n//\n\nexport const getUser = id => dispatch => {\n  dispatch(payload('GET_USER_PENDING')())\n  getRequest(`/user/${id}`)\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\nexport const editUser = ({ description, avatar }) => dispatch => {\n  dispatch(payload('EDIT_USER_PENDING')())\n  postRequest(payload('EDIT_USER')({ description, avatar }))\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\n//\n//  CATEGORIES\n//\n\nexport const addCategory = ({ title, description }) => dispatch => {\n  dispatch(payload('ADD_CATEGORY_PENDING')())\n  postRequest(payload('ADD_CATEGORY')({ title, description }))\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\nexport const editCategory = ({ id, title, description }) => dispatch => {\n  dispatch(payload('EDIT_CATEGORY_PENDING')())\n  postRequest(payload('EDIT_CATEGORY')({ id, title, description }))\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\nexport const getCategory = id => dispatch => {\n  dispatch(payload('GET_CATEGORY_PENDING')())\n  getRequest(`/category/${id}`)\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\nexport const getAllCategories = _ => dispatch => {\n  dispatch(payload('GET_ALL_CATEGORIES_PENDING')())\n  getRequest(`/categories`)\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\n//\n// THREADS\n//\n\nexport const addThread = ({ category_id, user_id, title, description }) => dispatch => {\n  dispatch(payload('ADD_THREAD_PENDING')())\n  postRequest(payload('ADD_THREAD')({ categoryId, userId, title, description }))\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\nexport const editThread = ({ id, title, description }) => dispatch => {\n  dispatch(payload('EDIT_THREAD_PENDING')())\n  postRequest(payload('EDIT_THREAD')({ id, title, description }))\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\nexport const getThread = id => dispatch => {\n  dispatch(payload('GET_THREAD_PENDING')())\n  getRequest(`/thread/${id}`)\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\nexport const getAllThreads = _ => dispatch => {\n  dispatch(payload('GET_ALL_THREADS_PENDING')())\n  getRequest(`/threads`)\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\nexport const getThreadsInCategory = id => dispatch => {\n  dispatch(payload('GET_THREADS_IN_CATEGORY_PENDING')({ id }))\n  getRequest(`/category/${id}/threads`)\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\n//\n// COMMENTS\n//\n\nexport const addComment = ({ thread_id, parent_id, content }) => dispatch => {\n  dispatch(payload('ADD_COMMENT_PENDING')())\n  postRequest(payload('ADD_COMMENT')({ thread_id, parent_id, content }))\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\nexport const editComment = ({ id, content }) => dispatch => {\n  dispatch(payload('EDIT_COMMENT_PENDING')())\n  postRequest(payload('EDIT_COMMENT')({ id, content }))\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\nexport const getComment = id => dispatch => {\n  dispatch(payload('GET_COMMENT_PENDING')())\n  getRequest(`/comment/${id}`)\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\nexport const getAllComments = _ => dispatch => {\n  dispatch(payload('GET_ALL_COMMENTS_PENDING')())\n  getRequest(`/comments`)\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\nexport const getCommentsInThread = id => dispatch => {\n  dispatch(payload('GET_COMMENTS_IN_THREAD_PENDING')({ id }))\n  getRequest(`/thread/${id}/comments`)\n    .then(res => dispatch(res))\n    .catch(e => dispatch(requestError(e)))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./actions/content.js"],"sourceRoot":""}